# next-swarm.ps1 - Auto-generated by Claude-4 (Phase 28 preparation)
# Launches the next swarm phase for TanStack Query Completion & Log Aggregation

Write-Host ""
Write-Host "===============================================" -ForegroundColor Cyan
Write-Host "  Phase 28: TanStack Query Completion & Log Aggregation" -ForegroundColor Cyan
Write-Host "===============================================" -ForegroundColor Cyan
Write-Host ""
Write-Host "Previous phase: Test Infrastructure & Review (v2.3.0)" -ForegroundColor Green
Write-Host "  - Backend: 1488 tests passing" -ForegroundColor Green
Write-Host "  - Frontend: 739 tests passing" -ForegroundColor Green
Write-Host "  - Test mock consolidation: shared factories in test-utils.jsx" -ForegroundColor Green
Write-Host "  - Security review: zero issues found" -ForegroundColor Green
Write-Host "  - Phase 27 was review-only (Claude-1/2 did not activate)" -ForegroundColor Green
Write-Host ""
Write-Host "Phase 28 focuses on:" -ForegroundColor Yellow
Write-Host "  1. Agent log aggregation endpoints (carry-forward x2)" -ForegroundColor White
Write-Host "  2. TanStack Query migration: SwarmControls, TerminalOutput, LogViewer, FileEditor" -ForegroundColor White
Write-Host "  3. Route-level preloading with queryClient.prefetchQuery" -ForegroundColor White
Write-Host "  4. Bundle size optimization and dependency audit" -ForegroundColor White
Write-Host "  5. Performance verification (Lighthouse, FCP/TTI)" -ForegroundColor White
Write-Host ""

# Update phase tracking
$phaseFile = ".claude\swarm-phase.json"
$phase = @{
    Phase = 13
    MaxPhases = 999
    StartedAt = (Get-Date -Format "yyyy-MM-dd HH:mm:ss")
} | ConvertTo-Json
Set-Content -Path $phaseFile -Value $phase -Encoding UTF8

# Clear signals from previous phase
Remove-Item -Path ".claude\signals\*.signal" -Force -ErrorAction SilentlyContinue

# Launch the swarm
Write-Host "Launching swarm..." -ForegroundColor Cyan
& .\swarm.ps1 -Resume -NoConfirm
