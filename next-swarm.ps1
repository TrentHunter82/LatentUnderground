# next-swarm.ps1 - Phase 4 -> Phase 5 Transition
# Generated by Claude-4 (Polish/Review)
#
# Phase 4 Final State:
#   - Backend: 148 tests passing, no changes (styling-only phase)
#   - Frontend: 118 tests passing, 5 test files, React 19 + Vite + Tailwind 4
#   - Total: 266 tests, zero failures
#   - Production build: 428KB JS + 32KB CSS + 179KB highlight.js
#   - 20 React components restyled with retro-futurism theme
#   - Google Fonts CDN: Space Mono + JetBrains Mono (zero JS impact)
#
# Phase 4 Deliverables:
#   - CRT scanline overlay (repeating-linear-gradient, pointer-events: none)
#   - Neon text glow utilities (green, cyan, magenta, amber)
#   - Neon box glow utilities for panels and buttons
#   - Phosphor green input fields with CRT caret color
#   - Retro grid background pattern on app container
#   - CRT vignette frame effect (inner shadow)
#   - Retro-futurism color palette (crt-green, crt-cyan, crt-magenta, crt-amber)
#   - Deep space background (#0a0a1a) replacing zinc-950
#   - LED-style status indicators (active glow, inactive dim)
#   - Agent neon colors: Claude-1=cyan, Claude-2=magenta, Claude-3=green, Claude-4=amber
#   - Light theme: amber-on-cream retro variant
#   - prefers-reduced-motion disables all animations
#   - Monospace typography throughout (Space Mono + JetBrains Mono)
#   - All 4 CSS class test assertions preserved (text-zinc-200, text-zinc-500, bg-emerald-500, animate-pulse)
#
# Phase 5 Focus: Docker Deployment, Swarm Templates, Advanced Features

Write-Host ""
Write-Host "========================================" -ForegroundColor Cyan
Write-Host "  Phase 4 Complete -> Launching Phase 5" -ForegroundColor Cyan
Write-Host "========================================" -ForegroundColor Cyan
Write-Host ""
Write-Host "  Phase 4: Retro-Futurism UI Redesign - DONE" -ForegroundColor Green
Write-Host "  266 tests passing (148 backend + 118 frontend)" -ForegroundColor Green
Write-Host "  Production build: 428KB JS + 32KB CSS" -ForegroundColor Green
Write-Host ""
Write-Host "  Phase 5: Docker, Templates, Advanced Features" -ForegroundColor Yellow
Write-Host ""

# Generate Phase 5 task board
$phase5Tasks = @"
# Latent Underground - Task Board (Phase 5)

## Claude-1 [Backend/Core] - Deployment and infrastructure

- [ ] Add Docker support: Dockerfile + docker-compose.yml for single-command deployment
- [ ] Add environment configuration: .env file support for host, port, database path
- [ ] Add database backup/export endpoint (GET /api/backup -> SQLite dump)
- [ ] Add swarm templates table and CRUD endpoints (save/load project configs as presets)
- [ ] Add process reconnection: detect and reattach to running subprocesses after restart
- [ ] Signal: Create .claude/signals/backend-ready.signal

## Claude-2 [Frontend/Interface] - UX and advanced features

- [ ] Add swarm template selector in NewProject form (dropdown of saved presets)
- [ ] Add mini-graph sparkline showing task completion rate over time in Dashboard
- [ ] Add keyboard navigation for tabs (arrow keys, Home/End)
- [ ] Add responsive mobile layout improvements (tab overflow scroll, collapsible panels)
- [ ] Add project export button (download project config + history as JSON)
- [ ] Signal: Create .claude/signals/frontend-ready.signal

## Claude-3 [Integration/Testing] - Test hardening and E2E

- [ ] Add tests for Docker build and startup
- [ ] Add tests for environment configuration loading
- [ ] Add tests for swarm template CRUD
- [ ] Add E2E test: full project lifecycle (create -> configure -> launch -> stop -> history)
- [ ] Add accessibility tests (tab navigation, ARIA attributes, screen reader compatibility)
- [ ] Signal: Create .claude/signals/tests-passing.signal

## Claude-4 [Polish/Review] - Final quality gate

- [ ] Review all Phase 5 code changes for quality and consistency
- [ ] Verify no regressions: all Phase 4 tests still pass (266+)
- [ ] Security review: Docker config, env handling, backup endpoint
- [ ] Write deployment documentation (README section for Docker, production config)
- [ ] FINAL: Generate next-swarm.ps1 for Phase 6 (if needed) or mark project complete

## Completion Criteria
- [ ] Application deployable via Docker with single command
- [ ] Swarm templates can be saved and loaded
- [ ] All tests pass (backend + frontend, including new Phase 5 tests)
"@

$phase5Tasks | Out-File -FilePath "tasks/TASKS.md" -Encoding UTF8
Write-Host "  Generated new tasks/TASKS.md for Phase 5" -ForegroundColor Green
Write-Host ""

# Relaunch swarm
Write-Host "  Relaunching swarm for Phase 5..." -ForegroundColor Yellow
& .\swarm.ps1 -Resume -NoConfirm
